
from bs4 import BeautifulSoup
import requests
contador = 0
consulta = 'daniel moreno pentest'
num = 10
headers = {'User-Agent':
'Mozilla/5.0 (X11; Linux x86_64; rv12.0) Gecko/20100101 Firefox/21.0'}
while True:
        parametros = {'q' : consulta, 'start': contador, 'num':num}
        resposta = requests.get('http://www.google.com.br/search', \
                                params=parametros, timeout = 2, headers=heards)
        msg = "Our systems have detected unusual traffic from your computer network"
        if msg in resposta.text:
            print "o Google detectou o comportamento da bot. Saindo..."
            break
        bs = BeautifulSoup(resposta.text, "lxml")
        cites = bs.find_all("cite")
        if len(cites) == 0:
            break
        divs = bs.find_all("div", {"class":"g"})
        for div in divs:
            try:
                print div.h3.a.text
                print div.h3.a["href"]
                print div.find("span", {"class":"st"}).text
                print
            except Exception:
                pass
        contador += 10